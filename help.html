<html>
  <head>
    <!-- Page Setup-->
    <title>Drizzle</title>
    <link rel="shortcut icon" type="image/png" href="icon.png">

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  </head>

  <body>
    <nav>
      <div class="nav-wrapper blue darken-2">
        <a href="dash.html" class="brand-logo right" style="margin-right:10px; margin-bottom:15px;">Drizzle<img src="icon.png" style="margin-bottom:-20px;"></a>
        <ul id="nav-mobile" class="left hide-on-med-and-down">
          <li><a href="index.html">Home</a></li>
          <li><a href="help.html">Help</a></li>
          <li><a href="dash.html">Dash</a></li>
        </ul>
      </div>
    </nav>

    <div class="row"> <!-- Row 1 -->
      <div class="col s12">
        <div class="card white darken-1">
          <div class="card-content black-text">
            <span class="card-title">Help!</span>
            <p>Found a glitch? Oh no! Report the problem below, along with your email, so we can contact you ASAP!</p>
          </div>
        </div>
      </div> <!-- Row 1 End -->

    <div class="row"> <!-- Both of the textboxes will be put here.-->
      <form class="col s6"> <!-- Email Textbox-->
        <div class="row">
          <div class="input-field col s12">
            <input id="email" type="email" class="validate">
            <label for="email">Email</label>
            <span class="helper-text" data-error="Invalid Email" data-success="Valid Email">Enter your email.</span>
          </div>
        </div>
      </form> <!-- End of Email Textbox-->

      <div class="input-field col s6"><!-- Report glitches and errors textbox-->
        <textarea id="reportbugs" class="materialize-textarea" data-length="120"></textarea>
        <label for="reportbugs">Report bugs here.</label>
      </div>
    </div> <!-- Textbox end-->

    <div class='row'>
      <form class="col s6">
        <div class="row">
          <!-- Now, we create a button that logs the error. -->
          <a class="waves-effect waves-light btn" onclick='getInput()' style='margin-left:20px'>submit report</a>
        </div>
      </form>
      <form class="col s6">
        <div class="row">
          <div id="thankbox"></div>
        </div>
      </form>
    </div>
  </body>

  <script>
    var tyBox = document.getElementById('thankbox');

    function getInput() {
      let uEmail = document.getElementById('email').value;
      let uError = document.getElementById('reportbugs').value;
      let rDate = getDate()
      let rTime = getTime()
      if (uEmail!='') {
        tyBox.innerHTML = '<p>Thank you. We will review your report and take nessessary actions.<br>If required, we will contact you for questioning on the issue.</p>'
      }
      JSONandsend(uEmail, uError, rDate, rTime);

    }

    function getDate() {
      let now = new Date();
      let date = now.getFullYear() + '/' + (now.getMonth()+1) + '/' + now.getDate();
      return date;
    }

    function getTime() {
      let now = new Date();
      var hours = now.getHours()
      if (hours > 12) {
        hours = hours - 12
      }
      let time = hours + ':' + now.getMinutes() + ':' + now.getSeconds();
      return time;
    }

    function JSONandsend(email, report, date, time) {
      // How the JSON will be formatted:
      // email, report, date, time (easy)
      let jsonSend = `{
  "email":"` + email + `",
  "report":"` + report + `",
  "date":"` + date + `",
  "time":"` + time + `"
}`;
      console.log(jsonSend); // replace this with the code that sends JSON
    }
  </script>
</html>
